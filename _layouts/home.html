---
layout: default
---

{% for post in paginator.posts %}
  {% assign post_date = post.date | date: '%Y-%m-%d' %}
  {% assign last_updated = post.last_updated | date: '%Y-%m-%d' %}
  {% assign post_href = site.github.url | append: post.url %}
  {% assign is_external_redirect = false %}
  {% if post.substack_url %}
    {% assign is_external_redirect = true %}
  {% elsif post.redirect_to %}
    {% assign redirect_target = post.redirect_to | first %}
    {% if redirect_target contains 'http' %}
      {% assign is_external_redirect = true %}
    {% endif %}
  {% endif %}
  {% assign summary_text = post.content | strip_html | replace: 'Published on Substack.', '' | replace: 'Read on Substack.', '' | strip | truncate: 350 %}
  {% if post.excerpt %}
    {% assign summary_text = post.excerpt | strip_html | truncate: 350 %}
  {% elsif is_external_redirect and summary_text == '' %}
    {% assign summary_text = 'Originally published on Substack.' %}
  {% endif %}

  <div class="posts-container">
    <h1>
      <a href="{{ post_href }}">
        {% if last_updated != post_date %}[UPDATED] {% endif %}{{ post.title }}
      </a>
    </h1>
    <!-- {{ last_updated }} | {{ post_date }} -->
    {% if post.image %}
      <div class="thumbnail-container">
        <a href="{{ post_href }}"><img src="{{ site.github.url }}/assets/img/{{ post.image }}"></a>
      </div>
    {% endif %}
    <p>
      {{ summary_text }}{% unless is_external_redirect %} <a href="{{ post_href }}">Read more</a>{% endunless %}
      <span class="post-date">
        <i class="fa fa-calendar" aria-hidden="true"></i> 
        {% if last_updated != post_date %}
          {{ post.last_updated | date_to_string }} (Updated)
        {% else %}
          {{ post.date | date_to_string }}
        {% endif %}
        {% unless is_external_redirect %} - <i class="fa fa-clock-o" aria-hidden="true"></i> {% include read-time.html %}{% endunless %}
      </span>
    </p>
  </div>
{% else %}
  <p>No posts found</p>
{% endfor %}

<!-- Pagination links -->
<div class="pagination">
  {% if paginator.next_page %}
    <a class="pagination-button pagination-active next" href="{{ site.github.url }}{{ paginator.next_page_path }}">{{ site.data.settings.pagination.previous_page }}</a>
  {% else %}
    <span class="pagination-button">{{ site.data.settings.pagination.previous_page }}</span>
  {% endif %}
  {% if paginator.previous_page %}
    <a class="pagination-button pagination-active" href="{{ site.baseurl }}{{ paginator.previous_page_path }}">{{ site.data.settings.pagination.next_page }}</a>
  {% else %}
    <span class="pagination-button">{{ site.data.settings.pagination.next_page }}</span>
  {% endif %}
</div>
